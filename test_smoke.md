# Smoke тесты для системы брокериджа

## Описание

Данный документ содержит быстрые тест-кейсы для проверки основной функциональности системы брокериджа заявок.

## Тест-кейсы

### 1. Создание клиента и заполнение анкеты

**Цель**: Проверить создание клиента и заполнение всех 26 пунктов анкеты

**Шаги**:
1. Открыть страницу создания заявки
2. Заполнить все обязательные поля:
   - Личные данные (8 полей)
   - Контактные данные (4 поля)
   - Профессиональные данные (4 поля)
   - Финансовые данные (4 поля)
   - Семейные данные (4 поля)
   - Дополнительные данные (2 поля)
3. Проверить валидацию каждого шага
4. Убедиться, что переход к следующему шагу блокируется при ошибках

**Ожидаемый результат**: 
- Все поля заполняются корректно
- Валидация работает на каждом шаге
- Переходы блокируются при ошибках
- Незаполненные поля отображаются как "—"

### 2. Добавление контактной информации

**Цель**: Проверить добавление множественных контактов

**Шаги**:
1. В разделе "Контактные данные" добавить:
   - 3 личных телефона
   - 2 рабочих телефона
   - 2 контакта знакомых
   - 2 автомобиля
2. Проверить сохранение всех данных
3. Проверить валидацию форматов телефонов

**Ожидаемый результат**:
- Все контакты сохраняются
- Валидация телефонов работает
- Данные отображаются корректно

### 3. Обработка незаполненных полей

**Цель**: Проверить отображение незаполненных полей

**Шаги**:
1. Создать заявку, не заполняя:
   - Поле "Супруга"
   - Поле "Транспорт"
2. Перейти к печатной форме
3. Проверить отображение незаполненных полей

**Ожидаемый результат**:
- Незаполненные поля отображаются как "—"
- Печатная форма формируется корректно

### 4. Загрузка файлов

**Цель**: Проверить загрузку и управление файлами

**Шаги**:
1. Загрузить 5 файлов разных типов:
   - 2 JPG изображения
   - 2 PDF документа
   - 1 DOC файл
2. Проверить предпросмотр файлов
3. Удалить 1 файл
4. Проверить сохранность остальных файлов

**Ожидаемый результат**:
- Все файлы загружаются успешно
- Предпросмотр работает
- Удаление файлов работает
- Метаданные сохраняются

### 5. Отправка заявки и скоринг

**Цель**: Проверить полный цикл обработки заявки

**Шаги**:
1. Заполнить все поля анкеты
2. Загрузить необходимые файлы
3. Отправить заявку
4. Проверить запуск скоринга
5. Получить результат скоринга
6. Проверить статус заявки

**Ожидаемый результат**:
- Заявка отправляется успешно
- Скоринг запускается автоматически
- Результат скоринга содержит минимум 3 объяснения
- Статус заявки обновляется

### 6. Опция "Кредит на ПОС"

**Цель**: Проверить работу дополнительных полей для ПОС

**Шаги**:
1. Включить опцию "Кредит на ПОС"
2. Проверить появление дополнительных полей:
   - ID мерчанта
   - ID терминала
   - Месячный оборот
   - Средний чек
3. Заполнить дополнительные поля
4. Проверить валидацию

**Ожидаемый результат**:
- Дополнительные поля появляются
- Валидация работает корректно
- Данные сохраняются

### 7. Генерация банковской гарантии

**Цель**: Проверить авто-подстановку данных в шаблон

**Шаги**:
1. Выбрать тип заявки "Банковская гарантия"
2. Заполнить данные клиента
3. Сгенерировать шаблон гарантии
4. Проверить авто-подстановку данных

**Ожидаемый результат**:
- Шаблон генерируется автоматически
- Данные клиента подставляются корректно
- Все обязательные поля заполнены

### 8. Страница "Мои заявки"

**Цель**: Проверить отображение заявок и статусов

**Шаги**:
1. Открыть страницу "Мои заявки"
2. Проверить отображение всех заявок
3. Проверить статусы заявок
4. Проверить временные метки
5. Проверить фильтрацию по статусам

**Ожидаемый результат**:
- Все заявки отображаются
- Статусы корректны
- Временные метки отображаются
- Фильтрация работает

## Критерии успеха

### Функциональность
- ✅ Все 26 пунктов анкеты работают
- ✅ Валидация блокирует переходы при ошибках
- ✅ Незаполненные поля отображаются как "—"
- ✅ Загрузка ≥10 файлов работает
- ✅ Предпросмотр и удаление файлов работает
- ✅ Метаданные файлов сохраняются
- ✅ Скоринг возвращает минимум 3 объяснения
- ✅ Пороговые классы A/B/C работают
- ✅ Статусы заявок отображаются корректно
- ✅ Временные метки сохраняются

### Производительность
- ✅ Загрузка страницы < 3 секунд
- ✅ Отправка заявки < 5 секунд
- ✅ Скоринг < 10 секунд
- ✅ Загрузка файлов < 30 секунд

### Безопасность
- ✅ Валидация входных данных
- ✅ Проверка типов файлов
- ✅ Ограничение размера файлов
- ✅ Защита от XSS

### UX/UI
- ✅ Интуитивный интерфейс
- ✅ Понятные сообщения об ошибках
- ✅ Прогресс-бар для загрузки
- ✅ Адаптивный дизайн

## Автоматизация тестов

### Unit тесты
```bash
# Backend
cd backend
go test ./... -v

# Frontend
cd frontend
npm test
```

### E2E тесты
```bash
# Запуск полного сценария
npm run test:e2e

# Запуск конкретного теста
npm run test:e2e -- --grep "Создание заявки"
```

### Contract тесты
```bash
# Тестирование адаптеров
go test ./contracts/... -v
```

## Мониторинг

### Метрики
- Время выполнения тестов
- Процент успешных тестов
- Количество ошибок
- Производительность системы

### Логи
- Детальные логи выполнения тестов
- Ошибки и предупреждения
- Производительность операций

## Заключение

Данные тест-кейсы покрывают основную функциональность системы брокериджа и позволяют быстро выявить критические проблемы. Рекомендуется запускать их после каждого деплоя для обеспечения стабильности системы.
